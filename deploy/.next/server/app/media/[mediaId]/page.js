(()=>{var e={};e.id=6589,e.ids=[6589],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71205:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c}),s(43319),s(58567),s(35866);var a=s(23191),r=s(88716),n=s(37922),i=s.n(n),l=s(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["media",{children:["[mediaId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,43319)),"C:\\Users\\chong\\AI Studio\\aimediatank-azure\\src\\app\\media\\[mediaId]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,58567)),"C:\\Users\\chong\\AI Studio\\aimediatank-azure\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\chong\\AI Studio\\aimediatank-azure\\src\\app\\media\\[mediaId]\\page.tsx"],m="/media/[mediaId]/page",u={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/media/[mediaId]/page",pathname:"/media/[mediaId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},20856:(e,t,s)=>{Promise.resolve().then(s.bind(s,88703))},35047:(e,t,s)=>{"use strict";var a=s(77389);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},88703:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(10326),r=s(17577),n=s(77109),i=s(35047),l=s(90434);function o({type:e,url:t,title:s,thumbnailUrl:n}){let[i,l]=(0,r.useState)(!1),[o,c]=(0,r.useState)(0),[d,m]=(0,r.useState)(0),[u,h]=(0,r.useState)(1),x=(0,r.useRef)(null),p=(0,r.useRef)(null),g=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`;return"IMAGE"===e?a.jsx("div",{className:"relative w-full rounded-2xl overflow-hidden bg-tank-dark",children:a.jsx("img",{src:t,alt:s,className:"w-full h-auto max-h-[80vh] object-contain"})}):"VIDEO"===e?a.jsx("div",{className:"relative w-full rounded-2xl overflow-hidden bg-tank-black",children:a.jsx("video",{ref:p,src:t,poster:n||void 0,controls:!0,className:"w-full max-h-[80vh]",onPlay:()=>l(!0),onPause:()=>l(!1)})}):(0,a.jsxs)("div",{className:"relative w-full rounded-2xl overflow-hidden bg-gradient-to-br from-purple-900/50 to-pink-900/50 p-8",children:[a.jsx("audio",{ref:x,src:t,onTimeUpdate:e=>c(e.currentTarget.currentTime),onLoadedMetadata:e=>m(e.currentTarget.duration),onPlay:()=>l(!0),onPause:()=>l(!1),onEnded:()=>l(!1)}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-48 h-48 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center mb-8 shadow-2xl shadow-purple-500/30",children:a.jsx("svg",{className:`w-20 h-20 text-white/80 ${i?"animate-pulse":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})})}),a.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:s}),(0,a.jsxs)("div",{className:"w-full max-w-md mb-4",children:[a.jsx("input",{type:"range",min:0,max:d||100,value:o,onChange:e=>{let t=parseFloat(e.target.value);c(t),x.current&&(x.current.currentTime=t)},className:"w-full h-2 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-tank-accent"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-400 mt-1",children:[a.jsx("span",{children:g(o)}),a.jsx("span",{children:g(d)})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[a.jsx("button",{onClick:()=>{x.current&&(x.current.currentTime=Math.max(0,o-10))},className:"p-2 text-white/70 hover:text-white transition-colors",children:a.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.333 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z"})})}),a.jsx("button",{onClick:()=>{x.current&&(i?x.current.pause():x.current.play())},className:"w-16 h-16 rounded-full bg-tank-accent flex items-center justify-center hover:bg-tank-accent/80 transition-colors shadow-lg shadow-tank-accent/30",children:i?a.jsx("svg",{className:"w-8 h-8 text-tank-black",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):a.jsx("svg",{className:"w-8 h-8 text-tank-black ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M8 5v14l11-7z"})})}),a.jsx("button",{onClick:()=>{x.current&&(x.current.currentTime=Math.min(d,o+10))},className:"p-2 text-white/70 hover:text-white transition-colors",children:a.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.933 12.8a1 1 0 000-1.6L6.6 7.2A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z"})})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-6",children:[a.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})}),a.jsx("input",{type:"range",min:0,max:1,step:.1,value:u,onChange:e=>{let t=parseFloat(e.target.value);h(t),x.current&&(x.current.volume=t)},className:"w-24 h-1 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white"})]})]})]})}var c=s(9708);function d(){let{mediaId:e}=(0,i.useParams)(),{data:t}=(0,n.useSession)(),s=(0,i.useRouter)(),[d,m]=(0,r.useState)(null),[u,h]=(0,r.useState)(!0),[x,p]=(0,r.useState)(""),[g,f]=(0,r.useState)(0),[j,b]=(0,r.useState)(""),[v,y]=(0,r.useState)(null),[k,N]=(0,r.useState)(!1),[w,C]=(0,r.useState)(!1),[S,M]=(0,r.useState)(""),[L,P]=(0,r.useState)(!1),[z,E]=(0,r.useState)(!1),[T,A]=(0,r.useState)(null),[I,$]=(0,r.useState)(""),[_,B]=(0,r.useState)(!1),[F,D]=(0,r.useState)(!1),[U,W]=(0,r.useState)(!1),H=t?.user?.id===d?.user?.id,O=t?.user?.role==="ADMIN",R=H||O,q=async()=>{if(!t){s.push("/login");return}D(!0);try{let t=await fetch(`/api/media/${e}/save`,{method:_?"DELETE":"POST"});await t.json(),t.ok&&B(!_)}catch(e){console.error("Error toggling save:",e)}finally{D(!1)}},V=async()=>{if(!t){s.push("/login");return}if(d&&d.price&&!(d.price<=0)){W(!0);try{let e=await fetch("/api/stripe/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaId:d.id})}),t=await e.json();e.ok&&t.url?window.location.href=t.url:alert(t.error||"Failed to start checkout")}catch(e){console.error("Error starting checkout:",e),alert("Failed to start checkout. Please try again.")}finally{W(!1)}}},G=async()=>{try{let t=await fetch(`/api/media/${e}`),s=await t.json();t.ok&&m(s)}catch(e){console.error("Error fetching media:",e)}finally{h(!1)}},J=async s=>{if(s.preventDefault(),x.trim()&&t){N(!0);try{(await fetch(`/api/media/${e}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:x})})).ok&&(p(""),G())}catch(e){console.error("Error posting comment:",e)}finally{N(!1)}}},Y=async()=>{if(g&&t){N(!0);try{(await fetch(`/api/media/${e}/rating`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({score:g,review:j})})).ok&&(y(g),G())}catch(e){console.error("Error rating media:",e)}finally{N(!1)}}},Z=async()=>{if(S.trim()&&t&&d){N(!0);try{(await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({receiverId:d.user.id,content:S})})).ok&&(M(""),C(!1),alert("Message sent!"))}catch(e){console.error("Error sending message:",e)}finally{N(!1)}}},X=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),K=async()=>{if(d){E(!0);try{let t=await fetch(`/api/media/${e}`,{method:"DELETE"});if(t.ok)s.push("/");else{let e=await t.json();alert(e.error||"Failed to delete media")}}catch(e){console.error("Error deleting media:",e),alert("Failed to delete media")}finally{E(!1),P(!1)}}},Q=async t=>{if(I.trim()){N(!0);try{let s=await fetch(`/api/media/${e}/comments`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({commentId:t,content:I})});if(s.ok)A(null),$(""),G();else{let e=await s.json();alert(e.error||"Failed to update comment")}}catch(e){console.error("Error updating comment:",e),alert("Failed to update comment")}finally{N(!1)}}},ee=async t=>{if(confirm("Are you sure you want to delete this comment?"))try{let s=await fetch(`/api/media/${e}/comments?commentId=${t}`,{method:"DELETE"});if(s.ok)G();else{let e=await s.json();alert(e.error||"Failed to delete comment")}}catch(e){console.error("Error deleting comment:",e),alert("Failed to delete comment")}},et=(e,t)=>{A(e),$(t)},es=()=>{A(null),$("")};return u?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"spinner"})}):d?(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[a.jsx(o,{type:d.type,url:d.url,title:d.title,thumbnailUrl:d.thumbnailUrl}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-2",children:[a.jsx("h1",{className:"text-2xl font-bold",children:d.title}),R&&(0,a.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[(0,a.jsxs)(l.default,{href:`/media/${e}/edit`,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-tank-gray hover:bg-tank-light rounded-lg transition-colors",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),(0,a.jsxs)("button",{onClick:()=>P(!0),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg transition-colors",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-400 mb-4",children:[(0,a.jsxs)("span",{children:[d.views.toLocaleString()," views"]}),a.jsx("span",{children:X(d.createdAt)}),d.avgRating>0&&(0,a.jsxs)("span",{className:"flex items-center gap-1 text-yellow-500",children:[a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),d.avgRating," (",d._count.ratings," ratings)"]}),a.jsx("span",{className:`badge ${"VIDEO"===d.type?"badge-video":"IMAGE"===d.type?"badge-image":"badge-music"}`,children:d.type})]}),d.description&&a.jsx("p",{className:"text-gray-300 mb-4",children:d.description}),(d.aiTool||d.aiPrompt)&&(0,a.jsxs)("div",{className:"bg-tank-dark rounded-xl p-4 space-y-2",children:[d.aiTool&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-sm text-gray-500",children:"AI Tool:"}),a.jsx("span",{className:"ml-2 text-tank-accent",children:d.aiTool})]}),d.aiPrompt&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Prompt:"}),a.jsx("p",{className:"text-gray-300 mt-1 text-sm bg-tank-gray p-3 rounded-lg",children:d.aiPrompt})]})]})]}),t&&t.user.id!==d.user.id&&(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("h3",{className:"font-semibold mb-4",children:["Rate this ",d.type.toLowerCase()]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[[1,2,3,4,5].map(e=>a.jsx("button",{onClick:()=>f(e),className:"text-2xl transition-transform hover:scale-110",children:e<=g?"⭐":"☆"},e)),v&&(0,a.jsxs)("span",{className:"text-sm text-gray-400 ml-2",children:["(You rated: ",v,")"]})]}),a.jsx("textarea",{value:j,onChange:e=>b(e.target.value),placeholder:"Write a review (optional)...",rows:2,className:"mb-4 resize-none"}),a.jsx("button",{onClick:Y,disabled:!g||k,className:"btn-primary",children:k?"Submitting...":v?"Update Rating":"Submit Rating"})]}),a.jsx("div",{className:"my-6",children:a.jsx(c.ZP,{adSlot:"auto",adFormat:"horizontal",className:"w-full",style:{minHeight:"90px"}})}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("h3",{className:"font-semibold mb-4",children:["Comments (",d._count.comments,")"]}),t?(0,a.jsxs)("form",{onSubmit:J,className:"mb-6",children:[a.jsx("textarea",{value:x,onChange:e=>p(e.target.value),placeholder:"Add a comment...",rows:3,className:"mb-3 resize-none"}),a.jsx("button",{type:"submit",disabled:!x.trim()||k,className:"btn-primary",children:k?"Posting...":"Post Comment"})]}):(0,a.jsxs)("p",{className:"text-gray-400 mb-6",children:[a.jsx(l.default,{href:"/login",className:"text-tank-accent hover:underline",children:"Sign in"})," ","to comment"]}),a.jsx("div",{className:"space-y-4",children:0===d.comments.length?a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No comments yet"}):d.comments.map(e=>(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-tank-accent to-purple-500 flex-shrink-0 flex items-center justify-center text-sm font-bold",children:e.user.name?.[0]?.toUpperCase()||e.user.username[0].toUpperCase()}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(l.default,{href:`/profile/${e.user.username}`,className:"font-medium hover:text-tank-accent",children:e.user.name||e.user.username}),a.jsx("span",{className:"text-sm text-gray-500",children:X(e.createdAt)})]}),t?.user?.id===e.user.id&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>et(e.id,e.content),className:"p-1.5 text-gray-400 hover:text-tank-accent hover:bg-tank-light rounded transition-colors",title:"Edit comment",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),a.jsx("button",{onClick:()=>ee(e.id),className:"p-1.5 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded transition-colors",title:"Delete comment",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),T===e.id?(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("textarea",{value:I,onChange:e=>$(e.target.value),className:"w-full resize-none text-sm",rows:2,autoFocus:!0}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>Q(e.id),disabled:!I.trim()||k,className:"px-3 py-1 text-sm bg-tank-accent text-tank-black font-semibold rounded-lg hover:bg-tank-accent/90 disabled:opacity-50 transition-colors",children:k?"Saving...":"Save"}),a.jsx("button",{onClick:es,className:"px-3 py-1 text-sm bg-tank-gray hover:bg-tank-light rounded-lg transition-colors",children:"Cancel"})]})]}):a.jsx("p",{className:"text-gray-300",children:e.content})]})]},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("button",{onClick:q,disabled:F,className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-semibold transition-all ${_?"bg-tank-accent text-tank-black hover:bg-tank-accent/90":"bg-tank-gray border border-tank-light text-white hover:bg-tank-light"}`,children:[F?a.jsx("div",{className:"w-5 h-5 border-2 border-current/30 border-t-current rounded-full animate-spin"}):a.jsx("svg",{className:"w-5 h-5",fill:_?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),_?"Saved to My Contents":"Save to My Contents"]}),d.price&&d.price>0&&!H&&(0,a.jsxs)("button",{onClick:V,disabled:U,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-semibold bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg shadow-green-500/25",children:[U?a.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),U?"Processing...":`Buy Now - $${d.price.toFixed(2)}`]}),d.price&&d.price>0&&H&&(0,a.jsxs)("div",{className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-semibold bg-tank-gray border border-tank-light text-gray-400",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Your Price: $",d.price.toFixed(2)]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("h3",{className:"font-semibold mb-4",children:"Creator"}),(0,a.jsxs)(l.default,{href:`/profile/${d.user.username}`,className:"flex items-center gap-3 mb-4 hover:opacity-80 transition-opacity",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-tank-accent to-purple-500 flex items-center justify-center text-lg font-bold",children:d.user.name?.[0]?.toUpperCase()||d.user.username[0].toUpperCase()}),a.jsx("div",{children:a.jsx("div",{className:"font-semibold",children:d.user.name||d.user.username})})]}),d.user.bio&&a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:d.user.bio}),t&&t.user.id!==d.user.id&&a.jsx("button",{onClick:()=>C(!0),className:"btn-secondary w-full",children:"Send Message"})]}),d.ratings.length>0&&(0,a.jsxs)("div",{className:"card",children:[a.jsx("h3",{className:"font-semibold mb-4",children:"Reviews"}),a.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:d.ratings.filter(e=>e.review).map((e,t)=>(0,a.jsxs)("div",{className:"border-b border-tank-light pb-4 last:border-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-yellow-500",children:"⭐".repeat(e.score)}),(0,a.jsxs)("span",{className:"text-sm text-gray-400",children:["by ",e.user.name||e.user.username]})]}),a.jsx("p",{className:"text-sm text-gray-300",children:e.review})]},t))})]})]})]}),w&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"card max-w-md w-full",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold mb-4",children:["Message @",d.user.username]}),a.jsx("textarea",{value:S,onChange:e=>M(e.target.value),placeholder:"Write your message...",rows:4,className:"mb-4 resize-none"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>C(!1),className:"btn-secondary flex-1",children:"Cancel"}),a.jsx("button",{onClick:Z,disabled:!S.trim()||k,className:"btn-primary flex-1",children:k?"Sending...":"Send"})]})]})}),L&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"card max-w-md w-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center",children:a.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-xl font-semibold",children:"Delete Media"}),a.jsx("p",{className:"text-sm text-gray-400",children:"This action cannot be undone"})]})]}),(0,a.jsxs)("p",{className:"text-gray-300 mb-6",children:['Are you sure you want to delete "',a.jsx("span",{className:"font-semibold",children:d.title}),'"? This will permanently remove the media file and all associated comments and ratings.']}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>P(!1),className:"btn-secondary flex-1",disabled:z,children:"Cancel"}),a.jsx("button",{onClick:K,disabled:z,className:"flex-1 px-4 py-2 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-lg transition-colors disabled:opacity-50",children:z?"Deleting...":"Delete"})]})]})})]}):a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Media Not Found"}),a.jsx("p",{className:"text-gray-400 mb-4",children:"This media may have been removed."}),a.jsx(l.default,{href:"/",className:"btn-primary",children:"Go Home"})]})})}},9708:(e,t,s)=>{"use strict";s.d(t,{ZP:()=>r});var a=s(10326);function r({adSlot:e,adFormat:t="auto",fullWidthResponsive:s=!0,className:r="",style:n={}}){return a.jsx("div",{className:`adsense-container ${r}`,style:n,children:a.jsx("ins",{className:"adsbygoogle",style:{display:"block",...n},"data-ad-client":"ca-pub-2773919175450942","data-ad-slot":e,"data-ad-format":t,"data-full-width-responsive":s.toString()})})}s(17577)},43319:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var a=s(68570);let r=(0,a.createProxy)(String.raw`C:\Users\chong\AI Studio\aimediatank-azure\src\app\media\[mediaId]\page.tsx`),{__esModule:n,$$typeof:i}=r;r.default;let l=(0,a.createProxy)(String.raw`C:\Users\chong\AI Studio\aimediatank-azure\src\app\media\[mediaId]\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[8948,5559,4613],()=>s(71205));module.exports=a})();