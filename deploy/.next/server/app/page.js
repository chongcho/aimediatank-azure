(()=>{var e={};e.id=1931,e.ids=[1931],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},64134:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>c}),t(35480),t(58567),t(35866);var a=t(23191),r=t(88716),l=t(37922),n=t.n(l),i=t(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,35480)),"C:\\Users\\chong\\AI Studio\\aimediatank-azure\\src\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,58567)),"C:\\Users\\chong\\AI Studio\\aimediatank-azure\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\chong\\AI Studio\\aimediatank-azure\\src\\app\\page.tsx"],x="/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},31634:(e,s,t)=>{Promise.resolve().then(t.bind(t,83658))},83658:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var a=t(10326),r=t(17577),l=t(35047),n=t(97437),i=t(77109),o=t(90434);function c(){let{data:e}=(0,i.useSession)(),[s,t]=(0,r.useState)([]),[l,n]=(0,r.useState)(""),[c,d]=(0,r.useState)(!0),[x,m]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1),h=(0,r.useRef)(null),g=(0,r.useRef)(null),f=e?.user?.role==="SUBSCRIBER"||e?.user?.role==="ADMIN",j=async e=>{if(e.preventDefault(),l.trim()&&!x&&f){m(!0);try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:l})});if(e.ok){let s=await e.json();t(e=>[...e,s.message]),n("")}}catch(e){console.error("Error sending message:",e)}finally{m(!1)}}},v=e=>{switch(e){case"ADMIN":return"text-red-400";case"SUBSCRIBER":return"text-tank-accent";default:return"text-gray-400"}};return a.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:(0,a.jsxs)("div",{className:`flex ${u?"h-14":"h-48"} bg-tank-dark/70 backdrop-blur-sm border border-b-0 border-tank-light/50 overflow-hidden transition-all duration-300`,children:[(0,a.jsxs)("div",{className:"w-12 bg-tank-accent/70 flex flex-col items-center justify-center cursor-pointer flex-shrink-0 px-1",onClick:()=>p(!u),children:[a.jsx("span",{className:"font-bold text-tank-black text-[10px]",children:"Live"}),a.jsx("span",{className:"font-bold text-tank-black text-[10px]",children:"Chat"}),a.jsx("svg",{className:`w-3 h-3 text-tank-black mt-0.5 transition-transform ${u?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),!u&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"w-1/4 border-r border-tank-light/50 flex items-stretch p-2",children:e?f?a.jsx("textarea",{value:l,onChange:e=>n(e.target.value),placeholder:"Type a message...",maxLength:500,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),l.trim()&&!x&&j(e))},className:"w-full h-full bg-tank-gray/50 border border-tank-light/50 rounded-none focus:outline-none focus:border-tank-accent text-gray-300 placeholder-gray-400 text-xs resize-none p-2"}):(0,a.jsxs)("div",{className:"text-gray-500 text-xs flex items-center",children:[a.jsx(o.default,{href:"/pricing",className:"text-tank-accent hover:underline",children:"Subscribe"}),"\xa0to chat"]}):(0,a.jsxs)("div",{className:"text-gray-500 text-xs flex items-center",children:[a.jsx(o.default,{href:"/login",className:"text-tank-accent hover:underline",children:"Sign in"}),"\xa0to chat"]})}),a.jsx("div",{ref:g,className:"flex-1 overflow-y-auto p-2",children:c?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"spinner"})}):0===s.length?a.jsx("div",{className:"text-gray-600 text-xs h-full flex items-center",children:"No messages yet"}):(0,a.jsxs)("div",{className:"space-y-0.5",children:[s.slice(-5).map(e=>(0,a.jsxs)("div",{className:"flex items-baseline gap-1 text-xs",children:[a.jsx(o.default,{href:`/profile/${e.user.username}`,className:`font-semibold hover:underline flex-shrink-0 ${v(e.user.role)}`,children:e.user.name||e.user.username}),a.jsx("span",{className:"text-gray-600",children:":"}),a.jsx("span",{className:"text-gray-300 break-words",children:e.content})]},e.id)),a.jsx("div",{ref:h})]})})]})]})})})}var d=t(9708);function x(){(0,l.useSearchParams)();let[e,s]=(0,r.useState)([]),[t,i]=(0,r.useState)(!0),[o,x]=(0,r.useState)("popular"),[m,u]=(0,r.useState)(null),[p,h]=(0,r.useState)(""),[g,f]=(0,r.useState)(1),[j,v]=(0,r.useState)(1),y=async()=>{i(!0);try{let e=new URLSearchParams({sort:o,page:g.toString(),limit:"20"});m&&e.set("type",m),p&&e.set("search",p);let t=await fetch(`/api/media?${e}`),a=await t.json();s(a.media||[]),v(a.pagination?.totalPages||1)}catch(e){console.error("Error fetching media:",e)}finally{i(!1)}};return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4 lg:gap-6 mb-8 py-2",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 overflow-visible",children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-bold italic",children:a.jsx("span",{className:"text-gradient pr-2",children:"AI-Generated"})}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Join and explore our community of AI creators and enthusiasts"})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),f(1),y()},className:"relative flex-1 ml-24",children:[a.jsx("input",{type:"text",value:p,onChange:e=>h(e.target.value),placeholder:"Search AI media...",className:"w-full pl-4 pr-24 py-2.5 bg-tank-gray border border-tank-light rounded-lg focus:border-tank-accent"}),a.jsx("button",{type:"submit",className:"absolute right-1.5 top-1/2 -translate-y-1/2 px-4 py-1.5 bg-tank-accent text-tank-black font-semibold rounded-md text-sm",children:"Search"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[a.jsx("span",{className:"text-sm text-gray-500 whitespace-nowrap",children:"Sort by:"}),(0,a.jsxs)("select",{value:o,onChange:e=>x(e.target.value),className:"bg-tank-gray border border-tank-light rounded-lg px-3 py-2 text-sm min-w-[130px]",children:[a.jsx("option",{value:"popular",children:"Most Popular"}),a.jsx("option",{value:"recent",children:"Most Recent"}),a.jsx("option",{value:"rated",children:"Highest Rated"})]})]})]}),a.jsx("div",{className:"mb-6",children:a.jsx(d.ZP,{adSlot:"auto",adFormat:"horizontal",className:"w-full",style:{minHeight:"90px"}})}),t?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",children:[...Array(8)].map((e,s)=>(0,a.jsxs)("div",{className:"bg-tank-gray rounded-2xl overflow-hidden",children:[a.jsx("div",{className:"aspect-video skeleton"}),(0,a.jsxs)("div",{className:"p-4",children:[a.jsx("div",{className:"h-5 skeleton mb-2 w-3/4"}),a.jsx("div",{className:"h-4 skeleton w-1/2"})]})]},s))}):0===e.length?(0,a.jsxs)("div",{className:"text-center py-20",children:[a.jsx("div",{className:"text-6xl mb-4",children:"\uD83C\uDFA8"}),a.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"No media found"}),a.jsx("p",{className:"text-gray-400",children:"Be the first to upload AI-generated content!"})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",children:e.map((s,t)=>(0,a.jsxs)(a.Fragment,{children:[a.jsx(n.Z,{media:s},s.id),(t+1)%8==0&&t<e.length-1&&a.jsx("div",{className:"col-span-full",children:a.jsx(d.ZP,{adSlot:"auto",adFormat:"fluid",className:"w-full my-4",style:{minHeight:"120px"}})},`ad-${t}`)]}))}),a.jsx("div",{className:"mt-8",children:a.jsx(d.ZP,{adSlot:"auto",adFormat:"horizontal",className:"w-full",style:{minHeight:"90px"}})}),j>1&&(0,a.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-12 mb-8",children:[a.jsx("button",{onClick:()=>f(e=>Math.max(1,e-1)),disabled:1===g,className:"px-4 py-2 bg-tank-gray rounded-lg disabled:opacity-50",children:"Previous"}),(0,a.jsxs)("span",{className:"px-4 text-gray-400",children:["Page ",g," of ",j]}),a.jsx("button",{onClick:()=>f(e=>Math.min(j,e+1)),disabled:g===j,className:"px-4 py-2 bg-tank-gray rounded-lg disabled:opacity-50",children:"Next"})]})]}),a.jsx(c,{})]})}function m(){return a.jsx(r.Suspense,{fallback:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4 lg:gap-6 mb-8 py-2",children:(0,a.jsxs)("div",{className:"flex-shrink-0 overflow-visible",children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-bold italic",children:a.jsx("span",{className:"text-gradient pr-2",children:"AI-Generated"})}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Join and explore our community of AI creators and enthusiasts"})]})}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",children:[...Array(8)].map((e,s)=>(0,a.jsxs)("div",{className:"bg-tank-gray rounded-2xl overflow-hidden",children:[a.jsx("div",{className:"aspect-video skeleton"}),(0,a.jsxs)("div",{className:"p-4",children:[a.jsx("div",{className:"h-5 skeleton mb-2 w-3/4"}),a.jsx("div",{className:"h-4 skeleton w-1/2"})]})]},s))})]}),children:a.jsx(x,{})})}},35480:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>l,default:()=>i});var a=t(68570);let r=(0,a.createProxy)(String.raw`C:\Users\chong\AI Studio\aimediatank-azure\src\app\page.tsx`),{__esModule:l,$$typeof:n}=r;r.default;let i=(0,a.createProxy)(String.raw`C:\Users\chong\AI Studio\aimediatank-azure\src\app\page.tsx#default`)}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[8948,5559,4613,4836],()=>t(64134));module.exports=a})();