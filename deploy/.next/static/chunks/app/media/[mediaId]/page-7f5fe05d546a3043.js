(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[589],{2140:function(e,t,s){Promise.resolve().then(s.bind(s,2092))},6463:function(e,t,s){"use strict";var a=s(1169);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},2092:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(7437),r=s(2265),n=s(998),l=s(6463),i=s(7138);function o(e){let{type:t,url:s,title:n,thumbnailUrl:l}=e,[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(0),[m,u]=(0,r.useState)(0),[h,x]=(0,r.useState)(1),p=(0,r.useRef)(null),f=(0,r.useRef)(null),g=e=>"".concat(Math.floor(e/60),":").concat(Math.floor(e%60).toString().padStart(2,"0"));return"IMAGE"===t?(0,a.jsx)("div",{className:"relative w-full rounded-2xl overflow-hidden bg-tank-dark",children:(0,a.jsx)("img",{src:s,alt:n,className:"w-full h-auto max-h-[80vh] object-contain"})}):"VIDEO"===t?(0,a.jsx)("div",{className:"relative w-full rounded-2xl overflow-hidden bg-tank-black",children:(0,a.jsx)("video",{ref:f,src:s,poster:l||void 0,controls:!0,className:"w-full max-h-[80vh]",onPlay:()=>o(!0),onPause:()=>o(!1)})}):(0,a.jsxs)("div",{className:"relative w-full rounded-2xl overflow-hidden bg-gradient-to-br from-purple-900/50 to-pink-900/50 p-8",children:[(0,a.jsx)("audio",{ref:p,src:s,onTimeUpdate:e=>d(e.currentTarget.currentTime),onLoadedMetadata:e=>u(e.currentTarget.duration),onPlay:()=>o(!0),onPause:()=>o(!1),onEnded:()=>o(!1)}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-48 h-48 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center mb-8 shadow-2xl shadow-purple-500/30",children:(0,a.jsx)("svg",{className:"w-20 h-20 text-white/80 ".concat(i?"animate-pulse":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-white mb-6",children:n}),(0,a.jsxs)("div",{className:"w-full max-w-md mb-4",children:[(0,a.jsx)("input",{type:"range",min:0,max:m||100,value:c,onChange:e=>{let t=parseFloat(e.target.value);d(t),p.current&&(p.current.currentTime=t)},className:"w-full h-2 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-tank-accent"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-400 mt-1",children:[(0,a.jsx)("span",{children:g(c)}),(0,a.jsx)("span",{children:g(m)})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsx)("button",{onClick:()=>{p.current&&(p.current.currentTime=Math.max(0,c-10))},className:"p-2 text-white/70 hover:text-white transition-colors",children:(0,a.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.333 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z"})})}),(0,a.jsx)("button",{onClick:()=>{p.current&&(i?p.current.pause():p.current.play())},className:"w-16 h-16 rounded-full bg-tank-accent flex items-center justify-center hover:bg-tank-accent/80 transition-colors shadow-lg shadow-tank-accent/30",children:i?(0,a.jsx)("svg",{className:"w-8 h-8 text-tank-black",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):(0,a.jsx)("svg",{className:"w-8 h-8 text-tank-black ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M8 5v14l11-7z"})})}),(0,a.jsx)("button",{onClick:()=>{p.current&&(p.current.currentTime=Math.min(m,c+10))},className:"p-2 text-white/70 hover:text-white transition-colors",children:(0,a.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.933 12.8a1 1 0 000-1.6L6.6 7.2A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z"})})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-6",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})}),(0,a.jsx)("input",{type:"range",min:0,max:1,step:.1,value:h,onChange:e=>{let t=parseFloat(e.target.value);x(t),p.current&&(p.current.volume=t)},className:"w-24 h-1 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white"})]})]})]})}var c=s(16);function d(){var e,t,s,d,m;let{mediaId:u}=(0,l.useParams)(),{data:h}=(0,n.useSession)(),x=(0,l.useRouter)(),[p,f]=(0,r.useState)(null),[g,v]=(0,r.useState)(!0),[j,b]=(0,r.useState)(""),[y,N]=(0,r.useState)(0),[w,k]=(0,r.useState)(""),[C,S]=(0,r.useState)(null),[L,M]=(0,r.useState)(!1),[E,P]=(0,r.useState)(!1),[T,z]=(0,r.useState)(""),[A,B]=(0,r.useState)(!1),[F,D]=(0,r.useState)(!1),[O,W]=(0,r.useState)(null),[H,R]=(0,r.useState)(""),[V,I]=(0,r.useState)(!1),[U,_]=(0,r.useState)(!1),[J,G]=(0,r.useState)(!1),Y=(null==h?void 0:null===(e=h.user)||void 0===e?void 0:e.id)===(null==p?void 0:null===(t=p.user)||void 0===t?void 0:t.id),Z=(null==h?void 0:null===(s=h.user)||void 0===s?void 0:s.role)==="ADMIN",$=Y||Z;(0,r.useEffect)(()=>{X(),h&&(ee(),q())},[u,h]);let q=async()=>{try{let e=await fetch("/api/media/".concat(u,"/save")),t=await e.json();I(t.saved)}catch(e){console.error("Error fetching saved status:",e)}},K=async()=>{if(!h){x.push("/login");return}_(!0);try{let e=await fetch("/api/media/".concat(u,"/save"),{method:V?"DELETE":"POST"});await e.json(),e.ok&&I(!V)}catch(e){console.error("Error toggling save:",e)}finally{_(!1)}},Q=async()=>{if(!h){x.push("/login");return}if(p&&p.price&&!(p.price<=0)){G(!0);try{let e=await fetch("/api/stripe/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaId:p.id})}),t=await e.json();e.ok&&t.url?window.location.href=t.url:alert(t.error||"Failed to start checkout")}catch(e){console.error("Error starting checkout:",e),alert("Failed to start checkout. Please try again.")}finally{G(!1)}}},X=async()=>{try{let e=await fetch("/api/media/".concat(u)),t=await e.json();e.ok&&f(t)}catch(e){console.error("Error fetching media:",e)}finally{v(!1)}},ee=async()=>{try{let e=await fetch("/api/media/".concat(u,"/rating")),t=await e.json();t.rating&&(S(t.rating.score),N(t.rating.score))}catch(e){console.error("Error fetching user rating:",e)}},et=async e=>{if(e.preventDefault(),j.trim()&&h){M(!0);try{(await fetch("/api/media/".concat(u,"/comments"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:j})})).ok&&(b(""),X())}catch(e){console.error("Error posting comment:",e)}finally{M(!1)}}},es=async()=>{if(y&&h){M(!0);try{(await fetch("/api/media/".concat(u,"/rating"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({score:y,review:w})})).ok&&(S(y),X())}catch(e){console.error("Error rating media:",e)}finally{M(!1)}}},ea=async()=>{if(T.trim()&&h&&p){M(!0);try{(await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({receiverId:p.user.id,content:T})})).ok&&(z(""),P(!1),alert("Message sent!"))}catch(e){console.error("Error sending message:",e)}finally{M(!1)}}},er=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),en=async()=>{if(p){D(!0);try{let e=await fetch("/api/media/".concat(u),{method:"DELETE"});if(e.ok)x.push("/");else{let t=await e.json();alert(t.error||"Failed to delete media")}}catch(e){console.error("Error deleting media:",e),alert("Failed to delete media")}finally{D(!1),B(!1)}}},el=async e=>{if(H.trim()){M(!0);try{let t=await fetch("/api/media/".concat(u,"/comments"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({commentId:e,content:H})});if(t.ok)W(null),R(""),X();else{let e=await t.json();alert(e.error||"Failed to update comment")}}catch(e){console.error("Error updating comment:",e),alert("Failed to update comment")}finally{M(!1)}}},ei=async e=>{if(confirm("Are you sure you want to delete this comment?"))try{let t=await fetch("/api/media/".concat(u,"/comments?commentId=").concat(e),{method:"DELETE"});if(t.ok)X();else{let e=await t.json();alert(e.error||"Failed to delete comment")}}catch(e){console.error("Error deleting comment:",e),alert("Failed to delete comment")}},eo=(e,t)=>{W(e),R(t)},ec=()=>{W(null),R("")};return g?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"spinner"})}):p?(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsx)(o,{type:p.type,url:p.url,title:p.title,thumbnailUrl:p.thumbnailUrl}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-2",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:p.title}),$&&(0,a.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[(0,a.jsxs)(i.default,{href:"/media/".concat(u,"/edit"),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-tank-gray hover:bg-tank-light rounded-lg transition-colors",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),(0,a.jsxs)("button",{onClick:()=>B(!0),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg transition-colors",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-400 mb-4",children:[(0,a.jsxs)("span",{children:[p.views.toLocaleString()," views"]}),(0,a.jsx)("span",{children:er(p.createdAt)}),p.avgRating>0&&(0,a.jsxs)("span",{className:"flex items-center gap-1 text-yellow-500",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),p.avgRating," (",p._count.ratings," ratings)"]}),(0,a.jsx)("span",{className:"badge ".concat("VIDEO"===p.type?"badge-video":"IMAGE"===p.type?"badge-image":"badge-music"),children:p.type})]}),p.description&&(0,a.jsx)("p",{className:"text-gray-300 mb-4",children:p.description}),(p.aiTool||p.aiPrompt)&&(0,a.jsxs)("div",{className:"bg-tank-dark rounded-xl p-4 space-y-2",children:[p.aiTool&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"AI Tool:"}),(0,a.jsx)("span",{className:"ml-2 text-tank-accent",children:p.aiTool})]}),p.aiPrompt&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Prompt:"}),(0,a.jsx)("p",{className:"text-gray-300 mt-1 text-sm bg-tank-gray p-3 rounded-lg",children:p.aiPrompt})]})]})]}),h&&h.user.id!==p.user.id&&(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("h3",{className:"font-semibold mb-4",children:["Rate this ",p.type.toLowerCase()]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[[1,2,3,4,5].map(e=>(0,a.jsx)("button",{onClick:()=>N(e),className:"text-2xl transition-transform hover:scale-110",children:e<=y?"⭐":"☆"},e)),C&&(0,a.jsxs)("span",{className:"text-sm text-gray-400 ml-2",children:["(You rated: ",C,")"]})]}),(0,a.jsx)("textarea",{value:w,onChange:e=>k(e.target.value),placeholder:"Write a review (optional)...",rows:2,className:"mb-4 resize-none"}),(0,a.jsx)("button",{onClick:es,disabled:!y||L,className:"btn-primary",children:L?"Submitting...":C?"Update Rating":"Submit Rating"})]}),(0,a.jsx)("div",{className:"my-6",children:(0,a.jsx)(c.ZP,{adSlot:"auto",adFormat:"horizontal",className:"w-full",style:{minHeight:"90px"}})}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("h3",{className:"font-semibold mb-4",children:["Comments (",p._count.comments,")"]}),h?(0,a.jsxs)("form",{onSubmit:et,className:"mb-6",children:[(0,a.jsx)("textarea",{value:j,onChange:e=>b(e.target.value),placeholder:"Add a comment...",rows:3,className:"mb-3 resize-none"}),(0,a.jsx)("button",{type:"submit",disabled:!j.trim()||L,className:"btn-primary",children:L?"Posting...":"Post Comment"})]}):(0,a.jsxs)("p",{className:"text-gray-400 mb-6",children:[(0,a.jsx)(i.default,{href:"/login",className:"text-tank-accent hover:underline",children:"Sign in"})," ","to comment"]}),(0,a.jsx)("div",{className:"space-y-4",children:0===p.comments.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No comments yet"}):p.comments.map(e=>{var t,s,r;return(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-tank-accent to-purple-500 flex-shrink-0 flex items-center justify-center text-sm font-bold",children:(null===(s=e.user.name)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.toUpperCase())||e.user.username[0].toUpperCase()}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.default,{href:"/profile/".concat(e.user.username),className:"font-medium hover:text-tank-accent",children:e.user.name||e.user.username}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:er(e.createdAt)})]}),(null==h?void 0:null===(r=h.user)||void 0===r?void 0:r.id)===e.user.id&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:()=>eo(e.id,e.content),className:"p-1.5 text-gray-400 hover:text-tank-accent hover:bg-tank-light rounded transition-colors",title:"Edit comment",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,a.jsx)("button",{onClick:()=>ei(e.id),className:"p-1.5 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded transition-colors",title:"Delete comment",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),O===e.id?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("textarea",{value:H,onChange:e=>R(e.target.value),className:"w-full resize-none text-sm",rows:2,autoFocus:!0}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>el(e.id),disabled:!H.trim()||L,className:"px-3 py-1 text-sm bg-tank-accent text-tank-black font-semibold rounded-lg hover:bg-tank-accent/90 disabled:opacity-50 transition-colors",children:L?"Saving...":"Save"}),(0,a.jsx)("button",{onClick:ec,className:"px-3 py-1 text-sm bg-tank-gray hover:bg-tank-light rounded-lg transition-colors",children:"Cancel"})]})]}):(0,a.jsx)("p",{className:"text-gray-300",children:e.content})]})]},e.id)})})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("button",{onClick:K,disabled:U,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-semibold transition-all ".concat(V?"bg-tank-accent text-tank-black hover:bg-tank-accent/90":"bg-tank-gray border border-tank-light text-white hover:bg-tank-light"),children:[U?(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-current/30 border-t-current rounded-full animate-spin"}):(0,a.jsx)("svg",{className:"w-5 h-5",fill:V?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),V?"Saved to My Contents":"Save to My Contents"]}),p.price&&p.price>0&&!Y&&(0,a.jsxs)("button",{onClick:Q,disabled:J,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-semibold bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg shadow-green-500/25",children:[J?(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),J?"Processing...":"Buy Now - $".concat(p.price.toFixed(2))]}),p.price&&p.price>0&&Y&&(0,a.jsxs)("div",{className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-semibold bg-tank-gray border border-tank-light text-gray-400",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Your Price: $",p.price.toFixed(2)]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"font-semibold mb-4",children:"Creator"}),(0,a.jsxs)(i.default,{href:"/profile/".concat(p.user.username),className:"flex items-center gap-3 mb-4 hover:opacity-80 transition-opacity",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-tank-accent to-purple-500 flex items-center justify-center text-lg font-bold",children:(null===(m=p.user.name)||void 0===m?void 0:null===(d=m[0])||void 0===d?void 0:d.toUpperCase())||p.user.username[0].toUpperCase()}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"font-semibold",children:p.user.name||p.user.username})})]}),p.user.bio&&(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-4",children:p.user.bio}),h&&h.user.id!==p.user.id&&(0,a.jsx)("button",{onClick:()=>P(!0),className:"btn-secondary w-full",children:"Send Message"})]}),p.ratings.length>0&&(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"font-semibold mb-4",children:"Reviews"}),(0,a.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:p.ratings.filter(e=>e.review).map((e,t)=>(0,a.jsxs)("div",{className:"border-b border-tank-light pb-4 last:border-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"text-yellow-500",children:"⭐".repeat(e.score)}),(0,a.jsxs)("span",{className:"text-sm text-gray-400",children:["by ",e.user.name||e.user.username]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-300",children:e.review})]},t))})]})]})]}),E&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"card max-w-md w-full",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold mb-4",children:["Message @",p.user.username]}),(0,a.jsx)("textarea",{value:T,onChange:e=>z(e.target.value),placeholder:"Write your message...",rows:4,className:"mb-4 resize-none"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>P(!1),className:"btn-secondary flex-1",children:"Cancel"}),(0,a.jsx)("button",{onClick:ea,disabled:!T.trim()||L,className:"btn-primary flex-1",children:L?"Sending...":"Send"})]})]})}),A&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"card max-w-md w-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold",children:"Delete Media"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"This action cannot be undone"})]})]}),(0,a.jsxs)("p",{className:"text-gray-300 mb-6",children:['Are you sure you want to delete "',(0,a.jsx)("span",{className:"font-semibold",children:p.title}),'"? This will permanently remove the media file and all associated comments and ratings.']}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>B(!1),className:"btn-secondary flex-1",disabled:F,children:"Cancel"}),(0,a.jsx)("button",{onClick:en,disabled:F,className:"flex-1 px-4 py-2 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-lg transition-colors disabled:opacity-50",children:F?"Deleting...":"Delete"})]})]})})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Media Not Found"}),(0,a.jsx)("p",{className:"text-gray-400 mb-4",children:"This media may have been removed."}),(0,a.jsx)(i.default,{href:"/",className:"btn-primary",children:"Go Home"})]})})}},16:function(e,t,s){"use strict";s.d(t,{ZP:function(){return n}});var a=s(7437),r=s(2265);function n(e){let{adSlot:t,adFormat:s="auto",fullWidthResponsive:n=!0,className:l="",style:i={}}=e;return(0,r.useEffect)(()=>{try{(window.adsbygoogle=window.adsbygoogle||[]).push({})}catch(e){console.error("AdSense error:",e)}},[]),(0,a.jsx)("div",{className:"adsense-container ".concat(l),style:i,children:(0,a.jsx)("ins",{className:"adsbygoogle",style:{display:"block",...i},"data-ad-client":"ca-pub-2773919175450942","data-ad-slot":t,"data-ad-format":s,"data-full-width-responsive":n.toString()})})}}},function(e){e.O(0,[998,138,971,23,744],function(){return e(e.s=2140)}),_N_E=e.O()}]);