(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[601],{8770:function(e,t,s){Promise.resolve().then(s.bind(s,1590))},6463:function(e,t,s){"use strict";var a=s(1169);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},1590:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(7437),r=s(2265),l=s(998),i=s(6463),n=s(7138);function c(){let{mediaId:e}=(0,i.useParams)(),{data:t,status:s}=(0,l.useSession)(),c=(0,i.useRouter)(),[o,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(!0),[x,h]=(0,r.useState)(!1),[p,f]=(0,r.useState)(""),[j,v]=(0,r.useState)(""),[b,g]=(0,r.useState)(""),[N,y]=(0,r.useState)(""),[k,w]=(0,r.useState)(""),[S,C]=(0,r.useState)(""),[P,M]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if("unauthenticated"===s){c.push("/login");return}"authenticated"===s&&E()},[s,e]);let E=async()=>{try{var s,a;let r=await fetch("/api/media/".concat(e)),l=await r.json();if(!r.ok){f("Media not found");return}if(l.user.id!==(null==t?void 0:null===(s=t.user)||void 0===s?void 0:s.id)&&(null==t?void 0:null===(a=t.user)||void 0===a?void 0:a.role)!=="ADMIN"){c.push("/media/".concat(e));return}d(l),v(l.title),g(l.description||""),y(l.aiTool||""),w(l.aiPrompt||""),C(l.price?l.price.toString():""),M(l.isPublic)}catch(e){console.error("Error fetching media:",e),f("Failed to load media")}finally{m(!1)}},L=async t=>{if(t.preventDefault(),!j.trim()){f("Title is required");return}h(!0),f("");try{let t=await fetch("/api/media/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:j.trim(),description:b.trim()||null,aiTool:N.trim()||null,aiPrompt:k.trim()||null,price:S?parseFloat(S):null,isPublic:P})});if(t.ok)c.push("/media/".concat(e));else{let e=await t.json();f(e.error||"Failed to update media")}}catch(e){console.error("Error updating media:",e),f("Failed to update media")}finally{h(!1)}};return u||"loading"===s?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"spinner"})}):p&&!o?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Error"}),(0,a.jsx)("p",{className:"text-gray-400 mb-4",children:p}),(0,a.jsx)(n.default,{href:"/",className:"btn-primary",children:"Go Home"})]})}):o?(0,a.jsxs)("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,a.jsx)(n.default,{href:"/media/".concat(e),className:"w-10 h-10 rounded-full bg-tank-gray hover:bg-tank-light flex items-center justify-center transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Edit Media"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Update your content details"})]})]}),(0,a.jsx)("div",{className:"card mb-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-32 h-20 rounded-lg overflow-hidden bg-tank-dark flex-shrink-0",children:"IMAGE"===o.type?(0,a.jsx)("img",{src:o.url,alt:o.title,className:"w-full h-full object-cover"}):o.thumbnailUrl?(0,a.jsx)("img",{src:o.thumbnailUrl,alt:o.title,className:"w-full h-full object-cover"}):"VIDEO"===o.type?(0,a.jsx)("video",{src:o.url,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"inline-block px-2 py-0.5 text-xs font-semibold rounded mb-2 ".concat("VIDEO"===o.type?"bg-red-500/20 text-red-400":"IMAGE"===o.type?"bg-blue-500/20 text-blue-400":"bg-purple-500/20 text-purple-400"),children:o.type}),(0,a.jsx)("p",{className:"text-sm text-gray-400 truncate",children:o.url})]})]})}),(0,a.jsxs)("form",{onSubmit:L,className:"card space-y-6",children:[p&&(0,a.jsx)("div",{className:"p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-400 text-sm",children:p}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Title ",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsx)("input",{type:"text",value:j,onChange:e=>v(e.target.value),placeholder:"Enter a title for your media",className:"w-full",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Description"}),(0,a.jsx)("textarea",{value:b,onChange:e=>g(e.target.value),placeholder:"Describe your creation...",rows:4,className:"w-full resize-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"AI Tool Used"}),(0,a.jsx)("input",{type:"text",value:N,onChange:e=>y(e.target.value),placeholder:"e.g., Midjourney, DALL-E, Sora, Suno",className:"w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"AI Prompt"}),(0,a.jsx)("textarea",{value:k,onChange:e=>w(e.target.value),placeholder:"Share the prompt you used to generate this...",rows:3,className:"w-full resize-none"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Sharing your prompt helps others learn from your creations"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Price (USD)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:"$"}),(0,a.jsx)("input",{type:"number",step:"0.01",min:"0",value:S,onChange:e=>C(e.target.value),placeholder:"0.00",className:"w-full pl-8"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty or set to 0 for free content"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Visibility"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"visibility",checked:P,onChange:()=>M(!0),className:"w-4 h-4 accent-tank-accent"}),(0,a.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Public"]})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"visibility",checked:!P,onChange:()=>M(!1),className:"w-4 h-4 accent-tank-accent"}),(0,a.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Private"]})]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Private media is only visible to you"})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-4 border-t border-tank-light",children:[(0,a.jsx)(n.default,{href:"/media/".concat(e),className:"btn-secondary flex-1 text-center",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:x||!j.trim(),className:"btn-primary flex-1",children:x?"Saving...":"Save Changes"})]})]})]}):null}}},function(e){e.O(0,[998,138,971,23,744],function(){return e(e.s=8770)}),_N_E=e.O()}]);