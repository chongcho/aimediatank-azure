(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6997:function(e,s,a){Promise.resolve().then(a.bind(a,5233))},5233:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return m}});var t=a(7437),l=a(2265),r=a(6463),n=a(8869),i=a(998),c=a(7138);function o(){var e,s;let{data:a}=(0,i.useSession)(),[r,n]=(0,l.useState)([]),[o,d]=(0,l.useState)(""),[x,m]=(0,l.useState)(!0),[h,u]=(0,l.useState)(!1),[g,f]=(0,l.useState)(!1),p=(0,l.useRef)(null),v=(0,l.useRef)(null),j=(null==a?void 0:null===(e=a.user)||void 0===e?void 0:e.role)==="SUBSCRIBER"||(null==a?void 0:null===(s=a.user)||void 0===s?void 0:s.role)==="ADMIN";(0,l.useEffect)(()=>{N();let e=setInterval(()=>{N(!0)},3e3);return()=>clearInterval(e)},[]),(0,l.useEffect)(()=>{g||b()},[r,g]);let N=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{e||m(!0);let s=await fetch("/api/chat?limit=50");if(s.ok){let e=await s.json();n(e.messages||[])}}catch(e){console.error("Error fetching messages:",e)}finally{e||m(!1)}},b=()=>{var e;null===(e=p.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},y=async e=>{if(e.preventDefault(),o.trim()&&!h&&j){u(!0);try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:o})});if(e.ok){let s=await e.json();n(e=>[...e,s.message]),d("")}}catch(e){console.error("Error sending message:",e)}finally{u(!1)}}},k=e=>{switch(e){case"ADMIN":return"text-red-400";case"SUBSCRIBER":return"text-tank-accent";default:return"text-gray-400"}};return(0,t.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-50",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:(0,t.jsxs)("div",{className:"flex ".concat(g?"h-14":"h-48"," bg-tank-dark/70 backdrop-blur-sm border border-b-0 border-tank-light/50 overflow-hidden transition-all duration-300"),children:[(0,t.jsxs)("div",{className:"w-12 bg-tank-accent/70 flex flex-col items-center justify-center cursor-pointer flex-shrink-0 px-1",onClick:()=>f(!g),children:[(0,t.jsx)("span",{className:"font-bold text-tank-black text-[10px]",children:"Live"}),(0,t.jsx)("span",{className:"font-bold text-tank-black text-[10px]",children:"Chat"}),(0,t.jsx)("svg",{className:"w-3 h-3 text-tank-black mt-0.5 transition-transform ".concat(g?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),!g&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-1/4 border-r border-tank-light/50 flex items-stretch p-2",children:a?j?(0,t.jsx)("textarea",{value:o,onChange:e=>d(e.target.value),placeholder:"Type a message...",maxLength:500,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),o.trim()&&!h&&y(e))},className:"w-full h-full bg-tank-gray/50 border border-tank-light/50 rounded-none focus:outline-none focus:border-tank-accent text-gray-300 placeholder-gray-400 text-xs resize-none p-2"}):(0,t.jsxs)("div",{className:"text-gray-500 text-xs flex items-center",children:[(0,t.jsx)(c.default,{href:"/pricing",className:"text-tank-accent hover:underline",children:"Subscribe"}),"\xa0to chat"]}):(0,t.jsxs)("div",{className:"text-gray-500 text-xs flex items-center",children:[(0,t.jsx)(c.default,{href:"/login",className:"text-tank-accent hover:underline",children:"Sign in"}),"\xa0to chat"]})}),(0,t.jsx)("div",{ref:v,className:"flex-1 overflow-y-auto p-2",children:x?(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("div",{className:"spinner"})}):0===r.length?(0,t.jsx)("div",{className:"text-gray-600 text-xs h-full flex items-center",children:"No messages yet"}):(0,t.jsxs)("div",{className:"space-y-0.5",children:[r.slice(-5).map(e=>(0,t.jsxs)("div",{className:"flex items-baseline gap-1 text-xs",children:[(0,t.jsx)(c.default,{href:"/profile/".concat(e.user.username),className:"font-semibold hover:underline flex-shrink-0 ".concat(k(e.user.role)),children:e.user.name||e.user.username}),(0,t.jsx)("span",{className:"text-gray-600",children:":"}),(0,t.jsx)("span",{className:"text-gray-300 break-words",children:e.content})]},e.id)),(0,t.jsx)("div",{ref:p})]})})]})]})})})}var d=a(16);function x(){let e=(0,r.useSearchParams)(),[s,a]=(0,l.useState)([]),[i,c]=(0,l.useState)(!0),[x,m]=(0,l.useState)("popular"),[h,u]=(0,l.useState)(null),[g,f]=(0,l.useState)(""),[p,v]=(0,l.useState)(1),[j,N]=(0,l.useState)(1);(0,l.useEffect)(()=>{let s=e.get("type");s?u(s):u(null)},[e]),(0,l.useEffect)(()=>{b()},[x,h,p]);let b=async()=>{c(!0);try{var e;let s=new URLSearchParams({sort:x,page:p.toString(),limit:"20"});h&&s.set("type",h),g&&s.set("search",g);let t=await fetch("/api/media?".concat(s)),l=await t.json();a(l.media||[]),N((null===(e=l.pagination)||void 0===e?void 0:e.totalPages)||1)}catch(e){console.error("Error fetching media:",e)}finally{c(!1)}};return(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4 lg:gap-6 mb-8 py-2",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 overflow-visible",children:[(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold italic",children:(0,t.jsx)("span",{className:"text-gradient pr-2",children:"AI-Generated"})}),(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:"Join and explore our community of AI creators and enthusiasts"})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),v(1),b()},className:"relative flex-1 ml-24",children:[(0,t.jsx)("input",{type:"text",value:g,onChange:e=>f(e.target.value),placeholder:"Search AI media...",className:"w-full pl-4 pr-24 py-2.5 bg-tank-gray border border-tank-light rounded-lg focus:border-tank-accent"}),(0,t.jsx)("button",{type:"submit",className:"absolute right-1.5 top-1/2 -translate-y-1/2 px-4 py-1.5 bg-tank-accent text-tank-black font-semibold rounded-md text-sm",children:"Search"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500 whitespace-nowrap",children:"Sort by:"}),(0,t.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"bg-tank-gray border border-tank-light rounded-lg px-3 py-2 text-sm min-w-[130px]",children:[(0,t.jsx)("option",{value:"popular",children:"Most Popular"}),(0,t.jsx)("option",{value:"recent",children:"Most Recent"}),(0,t.jsx)("option",{value:"rated",children:"Highest Rated"})]})]})]}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)(d.ZP,{adSlot:"auto",adFormat:"horizontal",className:"w-full",style:{minHeight:"90px"}})}),i?(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",children:[...Array(8)].map((e,s)=>(0,t.jsxs)("div",{className:"bg-tank-gray rounded-2xl overflow-hidden",children:[(0,t.jsx)("div",{className:"aspect-video skeleton"}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("div",{className:"h-5 skeleton mb-2 w-3/4"}),(0,t.jsx)("div",{className:"h-4 skeleton w-1/2"})]})]},s))}):0===s.length?(0,t.jsxs)("div",{className:"text-center py-20",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDFA8"}),(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"No media found"}),(0,t.jsx)("p",{className:"text-gray-400",children:"Be the first to upload AI-generated content!"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",children:s.map((e,a)=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Z,{media:e},e.id),(a+1)%8==0&&a<s.length-1&&(0,t.jsx)("div",{className:"col-span-full",children:(0,t.jsx)(d.ZP,{adSlot:"auto",adFormat:"fluid",className:"w-full my-4",style:{minHeight:"120px"}})},"ad-".concat(a))]}))}),(0,t.jsx)("div",{className:"mt-8",children:(0,t.jsx)(d.ZP,{adSlot:"auto",adFormat:"horizontal",className:"w-full",style:{minHeight:"90px"}})}),j>1&&(0,t.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-12 mb-8",children:[(0,t.jsx)("button",{onClick:()=>v(e=>Math.max(1,e-1)),disabled:1===p,className:"px-4 py-2 bg-tank-gray rounded-lg disabled:opacity-50",children:"Previous"}),(0,t.jsxs)("span",{className:"px-4 text-gray-400",children:["Page ",p," of ",j]}),(0,t.jsx)("button",{onClick:()=>v(e=>Math.min(j,e+1)),disabled:p===j,className:"px-4 py-2 bg-tank-gray rounded-lg disabled:opacity-50",children:"Next"})]})]}),(0,t.jsx)(o,{})]})}function m(){return(0,t.jsx)(l.Suspense,{fallback:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[(0,t.jsx)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4 lg:gap-6 mb-8 py-2",children:(0,t.jsxs)("div",{className:"flex-shrink-0 overflow-visible",children:[(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold italic",children:(0,t.jsx)("span",{className:"text-gradient pr-2",children:"AI-Generated"})}),(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:"Join and explore our community of AI creators and enthusiasts"})]})}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",children:[...Array(8)].map((e,s)=>(0,t.jsxs)("div",{className:"bg-tank-gray rounded-2xl overflow-hidden",children:[(0,t.jsx)("div",{className:"aspect-video skeleton"}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("div",{className:"h-5 skeleton mb-2 w-3/4"}),(0,t.jsx)("div",{className:"h-4 skeleton w-1/2"})]})]},s))})]}),children:(0,t.jsx)(x,{})})}}},function(e){e.O(0,[998,138,997,971,23,744],function(){return e(e.s=6997)}),_N_E=e.O()}]);