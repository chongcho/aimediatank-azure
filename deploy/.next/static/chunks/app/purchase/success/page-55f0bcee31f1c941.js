(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[251],{2199:function(e,s,n){Promise.resolve().then(n.bind(n,248))},6463:function(e,s,n){"use strict";var t=n(1169);n.o(t,"useParams")&&n.d(s,{useParams:function(){return t.useParams}}),n.o(t,"useRouter")&&n.d(s,{useRouter:function(){return t.useRouter}}),n.o(t,"useSearchParams")&&n.d(s,{useSearchParams:function(){return t.useSearchParams}})},248:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return l}});var t=n(7437),a=n(2265),r=n(6463),i=n(7138);function c(){var e,s;let n=(0,r.useSearchParams)().get("session_id"),[c,l]=(0,a.useState)(!0),[d,o]=(0,a.useState)(null),[u,m]=(0,a.useState)("");(0,a.useEffect)(()=>{n?x():(l(!1),m("No session ID provided"))},[n]);let x=async()=>{try{let e=await fetch("/api/purchase/verify?session_id=".concat(n)),s=await e.json();e.ok?o(s.purchase):m(s.error||"Failed to verify purchase")}catch(e){m("Failed to verify purchase")}finally{l(!1)}};return c?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"spinner mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-400",children:"Verifying your purchase..."})]})}):u?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center max-w-md",children:[(0,t.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-red-500/20 flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-10 h-10 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,t.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),(0,t.jsx)("p",{className:"text-gray-400 mb-6",children:u}),(0,t.jsx)(i.default,{href:"/",className:"btn-primary",children:"Go Home"})]})}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center py-12 px-4",children:(0,t.jsxs)("div",{className:"text-center max-w-md",children:[(0,t.jsx)("div",{className:"w-24 h-24 mx-auto mb-6 rounded-full bg-green-500/20 flex items-center justify-center animate-bounce",children:(0,t.jsx)("svg",{className:"w-12 h-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Purchase Successful!"}),(0,t.jsx)("p",{className:"text-gray-400 mb-8",children:"Thank you for your purchase. You now have access to this content."}),d&&(0,t.jsxs)("div",{className:"bg-tank-gray rounded-xl p-6 mb-8 text-left",children:[(0,t.jsx)("h3",{className:"font-semibold mb-4",children:"Purchase Details"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Item"}),(0,t.jsx)("span",{className:"font-medium",children:null===(e=d.media)||void 0===e?void 0:e.title})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Amount"}),(0,t.jsxs)("span",{className:"font-medium text-tank-accent",children:["$",null===(s=d.amount)||void 0===s?void 0:s.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Status"}),(0,t.jsx)("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 rounded text-xs",children:"Completed"})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(null==d?void 0:d.media)&&(0,t.jsxs)("a",{href:"/api/download/".concat(d.media.id),className:"flex-1 btn-primary flex items-center justify-center gap-2",download:!0,children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download Content"]}),(0,t.jsx)(i.default,{href:"/",className:"flex-1 btn-secondary",children:"Browse More"})]})]})})}function l(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"spinner"})}),children:(0,t.jsx)(c,{})})}}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=2199)}),_N_E=e.O()}]);